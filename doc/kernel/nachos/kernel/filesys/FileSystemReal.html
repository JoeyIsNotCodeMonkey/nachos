<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_91) on Mon Aug 22 14:20:49 EDT 2016 -->
<title>FileSystemReal (Nachos-SBU Kernel Documentation)</title>
<meta name="date" content="2016-08-22">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileSystemReal (Nachos-SBU Kernel Documentation)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../nachos/kernel/filesys/FileSystemStub.html" title="class in nachos.kernel.filesys"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?nachos/kernel/filesys/FileSystemReal.html" target="_top">Frames</a></li>
<li><a href="FileSystemReal.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">nachos.kernel.filesys</div>
<h2 title="Class FileSystemReal" class="title">Class FileSystemReal</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">nachos.kernel.filesys.FileSystem</a></li>
<li>
<ul class="inheritance">
<li>nachos.kernel.filesys.FileSystemReal</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>class <span class="typeNameLabel">FileSystemReal</span>
extends <a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">FileSystem</a></pre>
<div class="block">This class manages the overall operation of the file system.
        It implements methods to map from textual file names to files.
        Each file in the file system has:
           A file header, stored in a sector on disk 
                (the size of the file header data structure is arranged
                to be precisely the size of 1 disk sector);
           A number of data blocks;
           An entry in the file system directory.

        The file system consists of several data structures:
           A bitmap of free disk sectors (cf. bitmap.h);
           A directory of file names and file headers.

      Both the bitmap and the directory are represented as normal
        files.  Their file headers are located in specific sectors
        (sector 0 and sector 1), so that the file system can find them 
        on bootup.

        The file system assumes that the bitmap and directory files are
        kept "open" continuously while Nachos is running.

        For those operations (such as create, remove) that modify the
        directory and/or bitmap, if the operation succeeds, the changes
        are written immediately back to disk (the two files are kept
        open during all this time).  If the operation fails, and we have
        modified part of the directory and/or bitmap, we simply discard
        the changed version, without writing it back to disk.

        Our implementation at this point has the following restrictions:

           there is no synchronization for concurrent accesses;
           files have a fixed size, set when the file is created;
           files cannot be bigger than about 3KB in size;
           there is no hierarchical directory structure, and only a limited
             number of files can be added to the system;
           there is no attempt to make the system robust to failures
            (if Nachos exits in the middle of an operation that modifies
            the file system, it may corrupt the disk).

        A file system is a set of files stored on disk, organized
        into directories.  Operations on the file system have to
        do with "naming" -- creating, opening, and deleting files,
        given a textual file name.  Operations on an individual
        "open" file (read, write, close) are to be found in the OpenFile
        class (OpenFile.java).

        We define two separate implementations of the file system. 
        This version is a "real" file system, built on top of 
        a disk simulator.  The disk is simulated using the native
        file system on the host platform (in a file named "DISK"). 

        In the "real" implementation, there are two key data structures used 
        in the file system.  There is a single "root" directory, listing
        all of the files in the file system; unlike UNIX, the baseline
        system does not provide a hierarchical directory structure.  
        In addition, there is a bitmap for allocating
        disk sectors.  Both the root directory and the bitmap are themselves
        stored as files in the Nachos file system -- this causes an interesting
        bootstrap problem when the simulated disk is initialized.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../nachos/kernel/filesys/OpenFile.html" title="interface in nachos.kernel.filesys">OpenFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#directoryFile">directoryFile</a></span></code>
<div class="block">"Root" directory -- list of file names, represented as a file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#DirectoryFileSize">DirectoryFileSize</a></span></code>
<div class="block">The initial size of a directory file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#DirectorySector">DirectorySector</a></span></code>
<div class="block">The disk sector containing the directory of files.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../nachos/kernel/devices/DiskDriver.html" title="class in nachos.kernel.devices">DiskDriver</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#diskDriver">diskDriver</a></span></code>
<div class="block">Access to the disk on which the filesystem resides.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#diskSectorSize">diskSectorSize</a></span></code>
<div class="block">Sector size of the disk.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../nachos/kernel/filesys/OpenFile.html" title="interface in nachos.kernel.filesys">OpenFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#freeMapFile">freeMapFile</a></span></code>
<div class="block">Bit map of free disk blocks, represented as a file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#FreeMapFileSize">FreeMapFileSize</a></span></code>
<div class="block">The initial file size for the bitmap file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#FreeMapSector">FreeMapSector</a></span></code>
<div class="block">The disk sector containing the bitmap of free sectors.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#NumDirEntries">NumDirEntries</a></span></code>
<div class="block">The maximum number of entries in a directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#numDiskSectors">numDiskSectors</a></span></code>
<div class="block">Number of sectors on the disk.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#FileSystemReal-nachos.kernel.devices.DiskDriver-boolean-">FileSystemReal</a></span>(<a href="../../../nachos/kernel/devices/DiskDriver.html" title="class in nachos.kernel.devices">DiskDriver</a>&nbsp;diskDriver,
              boolean&nbsp;format)</code>
<div class="block">Initialize the file system.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#create-java.lang.String-long-">create</a></span>(java.lang.String&nbsp;name,
      long&nbsp;initialSize)</code>
<div class="block">Create a file in the Nachos file system (similar to UNIX create).</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#list--">list</a></span>()</code>
<div class="block">List all the files in the file system directory (for debugging).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../nachos/kernel/filesys/OpenFile.html" title="interface in nachos.kernel.filesys">OpenFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#open-java.lang.String-">open</a></span>(java.lang.String&nbsp;name)</code>
<div class="block">Open a file for reading and writing.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#print--">print</a></span>()</code>
<div class="block">Print everything about the file system (for debugging):
  the contents of the bitmap;
  the contents of the directory;
  for each file in the directory:
      the contents of the file header;
      the data in the file.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#readSector-int-byte:A-int-">readSector</a></span>(int&nbsp;sectorNumber,
          byte[]&nbsp;data,
          int&nbsp;index)</code>
<div class="block">Read a sector of the filesystem, using the underlying disk driver.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#remove-java.lang.String-">remove</a></span>(java.lang.String&nbsp;name)</code>
<div class="block">Delete a file from the file system.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../nachos/kernel/filesys/FileSystemReal.html#writeSector-int-byte:A-int-">writeSector</a></span>(int&nbsp;sectorNumber,
           byte[]&nbsp;data,
           int&nbsp;index)</code>
<div class="block">Write a sector of the filesystem, using the underlying disk driver.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.nachos.kernel.filesys.FileSystem">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;nachos.kernel.filesys.<a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">FileSystem</a></h3>
<code><a href="../../../nachos/kernel/filesys/FileSystem.html#bytesToInt-byte:A-int-">bytesToInt</a>, <a href="../../../nachos/kernel/filesys/FileSystem.html#init-nachos.kernel.devices.DiskDriver-">init</a>, <a href="../../../nachos/kernel/filesys/FileSystem.html#intToBytes-int-byte:A-int-">intToBytes</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="FreeMapSector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FreeMapSector</h4>
<pre>private static final&nbsp;int FreeMapSector</pre>
<div class="block">The disk sector containing the bitmap of free sectors.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#nachos.kernel.filesys.FileSystemReal.FreeMapSector">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DirectorySector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DirectorySector</h4>
<pre>private static final&nbsp;int DirectorySector</pre>
<div class="block">The disk sector containing the directory of files.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#nachos.kernel.filesys.FileSystemReal.DirectorySector">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NumDirEntries">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NumDirEntries</h4>
<pre>private static final&nbsp;int NumDirEntries</pre>
<div class="block">The maximum number of entries in a directory.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#nachos.kernel.filesys.FileSystemReal.NumDirEntries">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="diskDriver">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>diskDriver</h4>
<pre>private final&nbsp;<a href="../../../nachos/kernel/devices/DiskDriver.html" title="class in nachos.kernel.devices">DiskDriver</a> diskDriver</pre>
<div class="block">Access to the disk on which the filesystem resides.</div>
</li>
</ul>
<a name="numDiskSectors">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numDiskSectors</h4>
<pre>public final&nbsp;int numDiskSectors</pre>
<div class="block">Number of sectors on the disk.</div>
</li>
</ul>
<a name="diskSectorSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>diskSectorSize</h4>
<pre>public final&nbsp;int diskSectorSize</pre>
<div class="block">Sector size of the disk.</div>
</li>
</ul>
<a name="FreeMapFileSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FreeMapFileSize</h4>
<pre>private final&nbsp;int FreeMapFileSize</pre>
<div class="block">The initial file size for the bitmap file.</div>
</li>
</ul>
<a name="DirectoryFileSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DirectoryFileSize</h4>
<pre>private final&nbsp;int DirectoryFileSize</pre>
<div class="block">The initial size of a directory file.</div>
</li>
</ul>
<a name="freeMapFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeMapFile</h4>
<pre>private final&nbsp;<a href="../../../nachos/kernel/filesys/OpenFile.html" title="interface in nachos.kernel.filesys">OpenFile</a> freeMapFile</pre>
<div class="block">Bit map of free disk blocks, represented as a file.</div>
</li>
</ul>
<a name="directoryFile">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>directoryFile</h4>
<pre>private final&nbsp;<a href="../../../nachos/kernel/filesys/OpenFile.html" title="interface in nachos.kernel.filesys">OpenFile</a> directoryFile</pre>
<div class="block">"Root" directory -- list of file names, represented as a file.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FileSystemReal-nachos.kernel.devices.DiskDriver-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileSystemReal</h4>
<pre>protected&nbsp;FileSystemReal(<a href="../../../nachos/kernel/devices/DiskDriver.html" title="class in nachos.kernel.devices">DiskDriver</a>&nbsp;diskDriver,
                         boolean&nbsp;format)</pre>
<div class="block">Initialize the file system.  If format = true, the disk has
 nothing on it, and we need to initialize the disk to contain
 an empty directory, and a bitmap of free sectors (with almost but
 not all of the sectors marked as free).  

 If format = false, we just have to open the files
 representing the bitmap and the directory.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>diskDriver</code> - Access to the disk on which the filesystem resides.</dd>
<dd><code>format</code> - Should we initialize the disk?</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="readSector-int-byte:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readSector</h4>
<pre>void&nbsp;readSector(int&nbsp;sectorNumber,
                byte[]&nbsp;data,
                int&nbsp;index)</pre>
<div class="block">Read a sector of the filesystem, using the underlying disk driver.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sectorNumber</code> - The disk sector to read.</dd>
<dd><code>data</code> - The buffer to hold the contents of the disk sector.</dd>
<dd><code>index</code> - Offset in the buffer at which to place the data.</dd>
</dl>
</li>
</ul>
<a name="writeSector-int-byte:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeSector</h4>
<pre>void&nbsp;writeSector(int&nbsp;sectorNumber,
                 byte[]&nbsp;data,
                 int&nbsp;index)</pre>
<div class="block">Write a sector of the filesystem, using the underlying disk driver.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sectorNumber</code> - The disk sector to be written.</dd>
<dd><code>data</code> - The new contents of the disk sector.</dd>
<dd><code>index</code> - Offset in the buffer from which to get the data.</dd>
</dl>
</li>
</ul>
<a name="create-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;boolean&nbsp;create(java.lang.String&nbsp;name,
                      long&nbsp;initialSize)</pre>
<div class="block">Create a file in the Nachos file system (similar to UNIX create).
 Since we can't increase the size of files dynamically, we have
 to supply the initial size of the file.

 The steps to create a file are:
  Make sure the file doesn't already exist;
  Allocate a sector for the file header;
  Allocate space on disk for the data blocks for the file;
  Add the name to the directory;
  Store the new file header on disk;
  Flush the changes to the bitmap and the directory back to disk.

 Return true if everything goes ok, otherwise, return false.

 Create fails if:
        file is already in directory;
        no free space for file header;
        no free entry for file in directory;
        no free space for data blocks for the file.

 Note that this implementation assumes there is no concurrent access
        to the file system!</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../nachos/kernel/filesys/FileSystem.html#create-java.lang.String-long-">create</a></code>&nbsp;in class&nbsp;<code><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">FileSystem</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - The name of file to be created.</dd>
<dd><code>initialSize</code> - The size of file to be created.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the file was successfully created, otherwise false.</dd>
</dl>
</li>
</ul>
<a name="open-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public&nbsp;<a href="../../../nachos/kernel/filesys/OpenFile.html" title="interface in nachos.kernel.filesys">OpenFile</a>&nbsp;open(java.lang.String&nbsp;name)</pre>
<div class="block">Open a file for reading and writing.  
 To open a file:
          Find the location of the file's header, using the directory;
          Bring the header into memory.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../nachos/kernel/filesys/FileSystem.html#open-java.lang.String-">open</a></code>&nbsp;in class&nbsp;<code><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">FileSystem</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - The text name of the file to be opened.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An OpenFile object that provides access to the file contents,
 if the file was successfully opened, otherwise null.</dd>
</dl>
</li>
</ul>
<a name="remove-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;boolean&nbsp;remove(java.lang.String&nbsp;name)</pre>
<div class="block">Delete a file from the file system.  This requires:
    Remove it from the directory;
    Delete the space for its header;
    Delete the space for its data blocks;
    Write changes to directory, bitmap back to disk.

 Return true if the file was deleted, false if the file wasn't
        in the file system.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../nachos/kernel/filesys/FileSystem.html#remove-java.lang.String-">remove</a></code>&nbsp;in class&nbsp;<code><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">FileSystem</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - The text name of the file to be removed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the operation was successful, otherwise false.</dd>
</dl>
</li>
</ul>
<a name="list--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>list</h4>
<pre>public&nbsp;void&nbsp;list()</pre>
<div class="block">List all the files in the file system directory (for debugging).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../nachos/kernel/filesys/FileSystem.html#list--">list</a></code>&nbsp;in class&nbsp;<code><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">FileSystem</a></code></dd>
</dl>
</li>
</ul>
<a name="print--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>print</h4>
<pre>public&nbsp;void&nbsp;print()</pre>
<div class="block">Print everything about the file system (for debugging):
  the contents of the bitmap;
  the contents of the directory;
  for each file in the directory:
      the contents of the file header;
      the data in the file.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../nachos/kernel/filesys/FileSystem.html#print--">print</a></code>&nbsp;in class&nbsp;<code><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys">FileSystem</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../nachos/kernel/filesys/FileSystem.html" title="class in nachos.kernel.filesys"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../nachos/kernel/filesys/FileSystemStub.html" title="class in nachos.kernel.filesys"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?nachos/kernel/filesys/FileSystemReal.html" target="_top">Frames</a></li>
<li><a href="FileSystemReal.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
